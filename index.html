<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
  import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";

  // Твой исправленный конфиг
  const firebaseConfig = {
    apiKey: "AIzaSyD9gVWWwnrPg6GNN1Q6I-J6cBeOu-iMee0",
    authDomain: "nar-kael.firebaseapp.com",
    projectId: "nar-kael",
    storageBucket: "nar-kael.firebasestorage.app",
    messagingSenderId: "716148546557",
    appId: "1:716148546557:web:1c8ab4d9758c4b0cded794",
    measurementId: "G-1DJ3MBEFHV"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  // Логика переключения Вход/Регистрация
  let isReg = true;
  window.toggle = () => {
      isReg = !isReg;
      document.getElementById('form-title').innerText = isReg ? "Регистрация" : "Вход";
      document.getElementById('btn-text').innerText = isReg ? "Создать аккаунт" : "Войти";
  };

  window.handleAuth = async () => {
    const email = document.getElementById('email').value;
    const pass = document.getElementById('pass').value;

    if (!email || !pass) return alert("Заполни поля!");

    try {
      if (isReg) {
        await createUserWithEmailAndPassword(auth, email, pass);
        alert("Аккаунт успешно создан!");
      } else {
        await signInWithEmailAndPassword(auth, email, pass);
        alert("Вы вошли!");
      }
      document.getElementById('auth-screen').style.display = 'none';
      document.getElementById('protected-content').style.display = 'block';
    } catch (e) {
      console.error(e);
      alert("Ошибка: " + e.message);
    }
  };
</script>
